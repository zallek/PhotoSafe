# Migration `20200827155113-save-identities`

This migration has been generated by Nicolas Fortin at 8/27/2020, 5:51:13 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Face" ADD COLUMN     "identityId" INTEGER,
ADD COLUMN     "suggestedIdentityId" INTEGER,
ADD COLUMN     "suggestedIdentityyConfidence" REAL

CREATE TABLE "Identity" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL
)
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200827145329-photo-faces..20200827155113-save-identities
--- datamodel.dml
+++ datamodel.dml
@@ -3,22 +3,34 @@
 }
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 model Photo {
   id    Int    @default(autoincrement()) @id
   path  String @unique
   faces Face[] @relation
 }
+model Identity {
+  id             Int    @default(autoincrement()) @id
+  name           String
+  faces          Face[] @relation("Faces")
+  suggestedFaces Face[] @relation("SuggestedFaces")
+}
+
 model Face {
-  id      Int   @default(autoincrement()) @id
-  x       Int
-  y       Int
-  w       Int
-  h       Int
-  photo   Photo @relation(fields: [photoId], references: [id])
-  photoId Int
+  id                           Int       @default(autoincrement()) @id
+  x                            Int
+  y                            Int
+  w                            Int
+  h                            Int
+  identity                     Identity? @relation("Faces", fields: [identityId], references: [id])
+  identityId                   Int?
+  suggestedIdentity            Identity? @relation("SuggestedFaces", fields: [suggestedIdentityId], references: [id])
+  suggestedIdentityId          Int?
+  suggestedIdentityyConfidence Float?
+  photo                        Photo     @relation(fields: [photoId], references: [id])
+  photoId                      Int
 }
```


